# Configuration SentryGuard API
PORT=3001
WEBAPP_URL=http://localhost:3000

# Database Configuration
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=sentryguard
DATABASE_PASSWORD=your_database_password_here
DATABASE_NAME=sentryguard
DATABASE_LOGGING=false

# Security
ENCRYPTION_KEY=your_encryption_key_here_min_32_chars

# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_MODE=webhook
TELEGRAM_WEBHOOK_BASE=https://webhook-base.url
TELEGRAM_WEBHOOK_SECRET_PATH=your_webhook_secret_path
TELEGRAM_WEBHOOK_SECRET_TOKEN=your_webhook_secret_token

# Tesla API Configuration (Legacy - pour compatibilit√©)
LETS_ENCRYPT_CERTIFICATE=your_base64_encoded_certificate_here

# Tesla OAuth Configuration
TESLA_CLIENT_ID=your_tesla_client_id_here
TESLA_CLIENT_SECRET=your_tesla_client_secret_here
TESLA_AUDIENCE=https://fleet-api.prd.eu.vn.cloud.tesla.com
TESLA_REDIRECT_URI=https://sentryguard.org/callback/auth
TESLA_FLEET_TELEMETRY_SERVER_HOSTNAME=https://ws.sentryguard.org
TESLA_PUBLIC_KEY_BASE64=your_base64_encoded_public_key_here

# Tesla Telemetry Configuration
SENTRY_MODE_INTERVAL_SECONDS=30

# Kafka Configuration
KAFKA_BROKERS=10.0.2.15:9092
KAFKA_SASL_MECHANISM=plain
KAFKA_SASL_USERNAME=api_key
KAFKA_SASL_PASSWORD=api_secret
KAFKA_CLIENT_ID=sentry-guard-api
KAFKA_GROUP_ID=sentry-guard-consumer-group
KAFKA_TOPIC=FleetTelemetry_V

# Kafka Retry Configuration (for connection)
KAFKA_MAX_RETRIES=10
KAFKA_RETRY_DELAY=1000
KAFKA_MAX_RETRY_DELAY=30000
KAFKA_HEALTH_CHECK_INTERVAL=30000

# Kafka Message Retry Configuration (for message processing)
KAFKA_MESSAGE_MAX_RETRIES=3
KAFKA_MESSAGE_RETRY_BASE_DELAY=1000
KAFKA_MESSAGE_RETRY_MAX_DELAY=30000

# Kafka Message Retry Configuration (for sending failures)
TELEGRAM_MAX_RETRIES=5
TELEGRAM_BASE_DELAY_MS=1000
TELEGRAM_MAX_DELAY_MS=5000

DEBUG_MESSAGES=true

# Environment
NODE_ENV=development

# Rate Limiting Configuration
# All rate limiting values are configurable via environment variables
# Configuration is centrally managed in: apps/api/src/config/throttle.config.ts
# TTL: Time window in milliseconds
# LIMIT: Number of requests allowed per IP within the TTL window

# Global configuration
THROTTLE_TTL=60000
THROTTLE_LIMIT_DEFAULT=100

# Per-endpoint rate limits
THROTTLE_LIMIT_PUBLIC_SENSITIVE=40        # OAuth login, callbacks
THROTTLE_LIMIT_AUTHENTICATED_READ=200     # GET endpoints with JWT
THROTTLE_LIMIT_AUTHENTICATED_WRITE=100    # POST/PATCH/DELETE with JWT
THROTTLE_LIMIT_CRITICAL=50                # Resource-intensive operations
THROTTLE_LIMIT_TEST=30                    # /test endpoints

# JWT
JWT_SECRET=secret-for-jwt-creation
JWT_OAUTH_STATE_SECRET=secret-for-oauth-state-signing
JWT_EXPIRATION=1d

# Community
DISCORD_INVITE_URL=

# ZeptoMail Configuration (for welcome emails)
ZEPTOMAIL_API_KEY=your_zeptomail_api_key_here
ZEPTOMAIL_FROM_EMAIL=noreply@sentryguard.org
ZEPTOMAIL_FROM_NAME=SentryGuard

# Waitlist Email Scheduler Configuration
# Cron expression for processing approved users and sending welcome emails
# Examples:
#   */10 * * * * * - Every 10 seconds
#   */30 * * * * * - Every 30 seconds
#   0 * * * * * - Every minute
#   0 */5 * * * * - Every 5 minutes
#   0 0 * * * * - Every hour
WAITLIST_EMAIL_CRON_EXPRESSION=0 0 * * * *
# Number of approved users to process per cron run (default: 20)
WAITLIST_EMAIL_BATCH_SIZE=20

# Tesla Token Refresh Scheduler Configuration
# Cron expression for proactively refreshing expiring Tesla access and refresh tokens
TESLA_TOKEN_REFRESH_CRON_EXPRESSION=

# OCI Logging
OCI_USER_OCID=ocid1.user.oc1..your_user_ocid_here
OCI_TENANCY_OCID=ocid1.tenancy.oc1..your_tenancy_ocid_here
OCI_FINGERPRINT=your_fingerprint_here
OCI_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\nyour_private_key_content_here\n-----END PRIVATE KEY-----
OCI_PRIVATE_KEY_BASE64=
OCI_PRIVATE_KEY_PATH=path/to/private_key_file.pem
OCI_REGION=eu-frankfurt-1
OCI_LOG_ID=ocid1.log.oc1.eu-frankfurt-1.your_log_ocid_here
OCI_LOGGING_ENABLED=true
OCI_LOGGING_MAX_BATCH_SIZE=50
OCI_LOGGING_FLUSH_INTERVAL_MS=5000

LOG_LEVEL=debug
